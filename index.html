<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="./assets/favicon.png" type="image/x-icon" />
    <!-- CSS -->
    <!-- reset css -->
    <link rel="stylesheet" href="./css/reset.css" />
    <!-- root css (for font & variables) -->
    <link rel="stylesheet" href="./css/root.css" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Customized Tailwind -->
    <script src="./tailwind/customized-tailwind.js"></script>

    <!-- Page title  -->
    <title>QR Code Generator by Abu Naser Muhammad Arman</title>
  </head>

  <body
    class="bg-dark font-outfit text-base text-light flex items-center justify-center min-h-[80vh] p-5">
    <!-- Background image  -->
    <img
      src="./assets/bg-illustration.svg"
      alt="background image"
      class="fixed overflow-hidden max-w-lg w-full translate-x-[54%] translate-y-[6%] -z-10" />
    <main class="w-[640px] text-center">
      <!-- Logo -->
      <div class="w-32">
        <a href="./index.html">
          <img
            src="./assets/logo-qr-generator.svg"
            alt="QR Code Generator Logo" />
        </a>
      </div>

      <!-- text input form-->
      <form
        id="form"
        method="get"
        action="https://api.qrserver.com/v1/create-qr-code/"
        class="mt-8 flex p-1.5 bg-darker rounded-2xl items-center border-2 border-vibrant">
        <!-- Changed the input name to "data" cause its required by the API -->
        <input
          required
          type="text"
          id="text-input"
          name="data"
          placeholder="Enter url or text"
          class="w-full h-12 px-4 rounded-2xl bg-darker font-medium text-light bg-dark focus:bg-dark-muted focus:outline-0 placeholder:text-dark-muted" />

        <button
          type="submit"
          id="generate-qr-btn"
          class="w-36 h-12 -ml-36 bg-vibrant rounded-xl text-light">
          QR Code
        </button>
      </form>
    </main>
    <script>
      document
        .getElementById('form')
        .addEventListener('submit', function (event) {
          event.preventDefault();
          const textInput = document.getElementById('text-input').value;
          const qrSize = '600x600';
          const qrMargin = '24x24';
          const qrCode = '24x24';
          const qrQZone = '1';
          const qrFormat = 'png';
          const qrDownload = '1';

          const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?&margin=${qrMargin}&qzone=${qrQZone}&size=${qrSize}&data=${textInput}`;
          window.location.href = `./success.html?url=${encodeURIComponent(
            qrUrl
          )}`;
        });
    </script>
  </body>
</html>
