<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="./assets/favicon.png" type="image/x-icon" />
    <!-- CSS -->
    <!-- reset css -->
    <link rel="stylesheet" href="./css/reset.css" />
    <!-- root css (for font & variables) -->
    <link rel="stylesheet" href="./css/root.css" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Customized Tailwind -->
    <script src="./tailwind/customized-tailwind.js"></script>

    <!-- Page title  -->
    <title>QR Code Generator by Abu Naser Muhammad Arman</title>
  </head>

  <body class="bg-dark font-outfit text-base text-light py-10 px-20">
    <header>
      <!-- Logo -->
      <div class="w-28 mb-24">
        <a href="./index.html">
          <img
            src="./assets/logo-qr-generator.svg"
            alt="QR Code Generator Logo" />
        </a>
      </div>
    </header>

    <main
      class="text-center flex items-center justify-center w-full min-h-[50vh]">
      <!-- Background image  -->
      <img
        src="./assets/bg-illustration.svg"
        alt="background image"
        class="fixed overflow-hidden max-w-lg w-full -z-10 translate-x-[50%]" />

      <!-- QR Code container -->
      <div class="relative max-w-[640px]">
        <!-- bg round blob of qr image-->
        <div
          class="absolute bg-vibrant-muted translate-x-[10%] -translate-y-[12.5%] -z-10 top-0 rounded-full w-80 h-80"></div>

        <!-- QR image -->
        <div id="qr-image-container"></div>

        <div class="flex gap-8 mt-24 justify-evenly w-full items-center">
          <a
            href="#"
            id="qr-image-download-button"
            class="bg-vibrant text-light h-14 w-44 rounded-lg flex items-center justify-center"
            Download
            <span class="text-2xl ml-2 text-light-muted w-5">
              <img src="./assets/download-icon.svg" alt="download icon"
            /></span>
          </a>
          <a href="./index.html"
            class="bg-vibrant text-light h-14 w-44 rounded-lg flex items-center justify-center">
            Share
            <span class="text-2xl ml-2 text-light-muted w-5">
              <img src="./assets/share-icon.svg" alt="download icon"
            /></span>
          </a>
        </div>
      </div>
    </main>
    <script>
      const qrUrl = new URLSearchParams(window.location.search).get('url');

      const textInput = new URLSearchParams(window.location.search).get(
        'text-input'
      );

      if (qrUrl) {
        document.getElementById(
          'qr-image-container'
        ).innerHTML = `<img src="${qrUrl}" alt="Generated QR Code" class="mx-auto w-60 rounded-2xl"/>`;



        // Making download button functionable

        document.getElementById(
          'qr-image-download-button'
        ).innerHTML = 
        `<a 
        href="${qrUrl}&download=1" 
        
        target="_blank"

        id="qr-image-download-button"

        class="bg-vibrant text-light h-14 w-44 rounded-lg flex items-center justify-center">
        Download
        <span class="text-2xl ml-2 text-light-muted w-5">
          <img src="./assets/download-icon.svg" alt="download icon"
        /></span>
        </a>`;
      }
    </script>
  </body>
</html>
